[gd_scene load_steps=16 format=3]

[ext_resource type="Script" path="res://scripts/world.gd" id="1"]
[ext_resource type="PackedScene" path="res://scenes/player.tscn" id="2"]
[ext_resource type="Script" path="res://scripts/environment/segment_spawner.gd" id="3"]
[ext_resource type="Script" path="res://scripts/powerups/powerup_manager.gd" id="4"]
[ext_resource type="EnvironmentTileset" path="res://tilesets/charity_tileset.tres" id="5"]
[ext_resource type="EnvironmentTileset" path="res://tilesets/media_tileset.tres" id="6"]
[ext_resource type="EnvironmentTileset" path="res://tilesets/border_tileset.tres" id="7"]
[ext_resource type="PublicWorksJetpack" path="res://resources/powerups/public_works_jetpack.tres" id="8"]
[ext_resource type="FriendsFamilyMotorcade" path="res://resources/powerups/friends_family_motorcade.tres" id="9"]
[ext_resource type="NationalizedMediaMegaphone" path="res://resources/powerups/nationalized_media_megaphone.tres" id="10"]
[ext_resource type="PackedScene" path="res://scenes/powerup_pickup.tscn" id="11"]
[ext_resource type="PackedScene" path="res://scenes/collectibles/coin.tscn" id="12"]
[ext_resource type="Script" path="res://scripts/ui/hud.gd" id="13"]
[ext_resource type="PackedScene" path="res://scenes/hazards/spike_barrier.tscn" id="14"]
[ext_resource type="PackedScene" path="res://scenes/hazards/patrol_guard.tscn" id="15"]

[node name="World" type="Node2D"]
script = ExtResource("1")
player_path = NodePath("Player")
camera_path = NodePath("Camera2D")
segment_spawner_path = NodePath("SegmentSpawner")
powerup_manager_path = NodePath("PowerUpManager")
hud_path = NodePath("HUD")
powerup_pickup_scene = ExtResource("11")
coin_pickup_scene = ExtResource("12")
coin_value = 1.0
coin_spawn_variance = 8.0
obstacle_scenes = [ExtResource("14")]
enemy_scenes = [ExtResource("15")]
position = Vector2(0, 0)

[node name="SegmentSpawner" type="Node2D" parent="."]
script = ExtResource("3")
player_path = NodePath("../Player")
tilesets = [ExtResource("5"), ExtResource("6"), ExtResource("7")]
segments_ahead = 3
recycle_margin = 800.0
heat_ramp_rate = 0.016

[node name="Player" parent="." instance=ExtResource("2")]
position = Vector2(80, -96)

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(80, -160)
zoom = Vector2(1.2, 1.2)
current = true

[node name="PowerUpManager" type="Node" parent="."]
script = ExtResource("4")
player_path = NodePath("../Player")
world_path = NodePath("..")
available_powerups = [ExtResource("8"), ExtResource("9"), ExtResource("10")]
randomize_queue = true

[node name="HUD" type="CanvasLayer" parent="."]
script = ExtResource("13")

[node name="MarginContainer" type="MarginContainer" parent="HUD"]
anchor_right = 0.0
anchor_bottom = 0.0
offset_left = 16.0
offset_top = 16.0
offset_right = 296.0
offset_bottom = 176.0
theme_override_constants/margin_left = 12
theme_override_constants/margin_top = 12
theme_override_constants/margin_right = 12
theme_override_constants/margin_bottom = 12

[node name="PanelContainer" type="PanelContainer" parent="HUD/MarginContainer"]
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="ContentMargin" type="MarginContainer" parent="HUD/MarginContainer/PanelContainer"]
theme_override_constants/margin_left = 12
theme_override_constants/margin_top = 12
theme_override_constants/margin_right = 12
theme_override_constants/margin_bottom = 12

[node name="VBoxContainer" type="VBoxContainer" parent="HUD/MarginContainer/PanelContainer/ContentMargin"]
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/separation = 8

[node name="CurrencyLabel" type="Label" parent="HUD/MarginContainer/PanelContainer/ContentMargin/VBoxContainer"]
unique_name_in_owner = true
text = "Coin Bank: 0"
theme_override_font_sizes/font_size = 22

[node name="DistanceLabel" type="Label" parent="HUD/MarginContainer/PanelContainer/ContentMargin/VBoxContainer"]
unique_name_in_owner = true
text = "Distance: 0 m"
theme_override_font_sizes/font_size = 18

[node name="MotorcadeLabel" type="Label" parent="HUD/MarginContainer/PanelContainer/ContentMargin/VBoxContainer"]
unique_name_in_owner = true
visible = false
text = "Motorcade Upkeep: -0/s"
theme_override_font_colors/font_color = Color(1, 0.854902, 0.572549, 1)
theme_override_font_sizes/font_size = 16

[node name="RunSummary" type="Control" parent="HUD"]
unique_name_in_owner = true
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 1

[node name="Dimmer" type="ColorRect" parent="HUD/RunSummary"]
anchor_right = 1.0
anchor_bottom = 1.0
color = Color(0, 0, 0, 0.55)

[node name="CenterContainer" type="CenterContainer" parent="HUD/RunSummary"]
anchor_right = 1.0
anchor_bottom = 1.0

[node name="PanelContainer" type="PanelContainer" parent="HUD/RunSummary/CenterContainer"]
custom_minimum_size = Vector2(360, 240)

[node name="ContentMargin" type="MarginContainer" parent="HUD/RunSummary/CenterContainer/PanelContainer"]
theme_override_constants/margin_left = 18
theme_override_constants/margin_top = 18
theme_override_constants/margin_right = 18
theme_override_constants/margin_bottom = 18

[node name="VBoxContainer" type="VBoxContainer" parent="HUD/RunSummary/CenterContainer/PanelContainer/ContentMargin"]
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/separation = 12

[node name="SummaryReasonLabel" type="Label" parent="HUD/RunSummary/CenterContainer/PanelContainer/ContentMargin/VBoxContainer"]
unique_name_in_owner = true
text = "Run Complete"
horizontal_alignment = 1
theme_override_font_sizes/font_size = 28

[node name="SummaryDistanceLabel" type="Label" parent="HUD/RunSummary/CenterContainer/PanelContainer/ContentMargin/VBoxContainer"]
unique_name_in_owner = true
text = "Distance: 0 m"
horizontal_alignment = 1
theme_override_font_sizes/font_size = 20

[node name="SummaryCoinsLabel" type="Label" parent="HUD/RunSummary/CenterContainer/PanelContainer/ContentMargin/VBoxContainer"]
unique_name_in_owner = true
text = "Coins: 0"
horizontal_alignment = 1
theme_override_font_sizes/font_size = 20

[node name="SummaryHeatLabel" type="Label" parent="HUD/RunSummary/CenterContainer/PanelContainer/ContentMargin/VBoxContainer"]
unique_name_in_owner = true
text = "Heat: 0.0"
horizontal_alignment = 1
theme_override_font_sizes/font_size = 18

[node name="RetryButton" type="Button" parent="HUD/RunSummary/CenterContainer/PanelContainer/ContentMargin/VBoxContainer"]
unique_name_in_owner = true
text = "Retry"
size_flags_horizontal = 4
